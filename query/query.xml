<?xml version="1.0" encoding="UTF-8" ?>
<query>
  <doLogin>
    SELECT usr_num, name, auth_type FROM user WHERE id = '%s' AND pw = '%s'
  </doLogin>

  <doAttend>
    UPDATE attend ATT
    SET ATT.attend_state = 1
    WHERE ATT.cou_num = %s
    AND ATT.order = %s
    AND ATT.time = '%s'
    AND stu_num IN (%s);
  </doAttend>
  <getStuInfo>
    SELECT USR.usr_num, USR.name, USR.auth_type, COU.cou_num, COU.cou_name, PRO.name pro_name
  	FROM user USR, course COU, study STD, user PRO
  	WHERE USR.usr_num = %s
  	AND USR.usr_num = STD.stu_num
  	AND STD.cou_num = COU.cou_num
  	AND COU.pro_num = PRO.usr_num
  </getStuInfo>
  <getProInfo>
    SELECT PRO.usr_num, PRO.name, PRO.auth_type, COU.cou_num, COU.cou_name, PRO.name pro_name
  	FROM user PRO, course COU
  	WHERE PRO.usr_num = %s
  	AND PRO.usr_num = COU.pro_num
  </getProInfo>
  <getAdminInfo>
    <!-- SELECT USR.usr_num, USR.name, USR.auth_type, COU.cou_num, COU.cou_name, PRO.name pro_name
  	FROM user USR, course COU, study STD, user PRO
  	WHERE USR.usr_num = %s
  	AND USR.usr_num = STD.stu_num
  	AND STD.cou_num = COU.cou_num
  	AND COU.pro_num = PRO.usr_num; -->
  </getAdminInfo>
  <getCourse>
    SELECT COU.cou_num, COU.cou_name, PRO.name pro_name
    FROM user PRO, course COU, study STD
    WHERE STD.stu_num = %s
    AND STD.cou_num = COU.cou_num
    AND COU.pro_num = PRO.usr_num
  </getCourse>
  <getSchedule>
    SELECT COU.cou_num, COUT.weekday, PRO.name, COU.cou_name, COUT.place, COUT.start_time, COUT.during_time
    FROM study STU, course_time COUT, course COU, user PRO
    WHERE STU.stu_num = %s
    AND COUT.cou_num = COU.cou_num
    and COU.pro_num = PRO.usr_num
    AND STU.cou_num = COUT.cou_num
  </getSchedule>
  <getStuAttend>
    SELECT COU.cou_name, ATT.stu_num, date(ATT.time) date, sum(ATT.attend_state) att_cnt
    FROM attend ATT, course COU
    WHERE ATT.stu_num = %s
    AND ATT.cou_num = %s
    AND COU.cou_num = ATT.cou_num
    GROUP by ATT.cou_num, ATT.stu_num, date(ATT.time)
  </getStuAttend>
  <getUsersInfo>
    SELECT usr_num, id, name
    FROM user
    WHERE usr_num IN (%s)
  </getUsersInfo>

</query>
